const mainEndpoint="https://gateway.marvel.com/v1/public",queryString="ts=1&apikey=ffab3772fcbccb99f5afc9bd0b19c7ec&hash=c943498f362b6eb739af46796faf4036",urlType=a=>`${mainEndpoint}/${a}?${queryString}`,fetchStuff=async a=>{const t=await fetch(a);return await t.json()},characterURL=async a=>{const t=`${`${mainEndpoint}/${"characters"}?${queryString}`}&name=${a}`;return await fetchStuff(t)},specificComicUrl=async a=>{const t=`https://gateway.marvel.com/v1/public/comics/${a}?apikey=ffab3772fcbccb99f5afc9bd0b19c7ec&hash=c943498f362b6eb739af46796faf4036`;return await fetchStuff(t)},comicUrl=async a=>{const t=`https://gateway.marvel.com/v1/public/comics?titleStartsWith=${a}&limit=100&offset=0&ts=1&apikey=ffab3772fcbccb99f5afc9bd0b19c7ec&hash=c943498f362b6eb739af46796faf4036`;return await fetchStuff(t)},eventUrl=async a=>{const t=`https://gateway.marvel.com/v1/public/events?nameStartsWith=${a}&limit=100&ts=1&apikey=ffab3772fcbccb99f5afc9bd0b19c7ec&hash=c943498f362b6eb739af46796faf4036`;return await fetchStuff(t)},invokeFuncInDataTemplate=async(a,t,c,e)=>{t((await c(a)).data.results[0],e)},invokeFuncInData=async(a,t)=>{a((await characterURL(t)).data.results[0])},getImgLink=a=>`${a.thumbnail.path}.${a.thumbnail.extension}`,invokeFuncFullResponse=async(a,t)=>{a(await characterURL(t))};export{fetchStuff,invokeFuncInDataTemplate,invokeFuncFullResponse,invokeFuncInData,characterURL,getImgLink,comicUrl,eventUrl,specificComicUrl};
const heroImg=document.querySelector(".hero__img"),heroTitle=document.querySelector(".hero__title"),heroDesc=document.querySelector(".hero__desc"),heroBtnLink=document.querySelector(".hero__btn__link"),comicDiv=document.querySelector(".comic"),eventDiv=document.querySelector(".event"),target=localStorage.getItem("selectedCharacter").toLocaleLowerCase(),injectHero=e=>{heroImg.setAttribute("src",getImgLink(e)),heroImg.setAttribute("alt",e.name),heroTitle.innerText=e.name,heroDesc.innerText=e.description,e.description||(heroDesc.innerText=`   ${e.name} is one of the characters in Marvel.   `),heroBtnLink.setAttribute("href",e.urls[0].url)};invokeFuncInDataTemplate(target,injectHero,characterURL);const getComicInfo=async e=>{const t=`https://gateway.marvel.com/v1/public/characters/${e.id}/comics?limit=100&ts=1&apikey=ffab3772fcbccb99f5afc9bd0b19c7ec&hash=c943498f362b6eb739af46796faf4036`,n=(await fetchStuff(t)).data.results,c=n.map((e=>e.title));const r=function*(e){const t=e;let n=3;for(;0!==n;){const e=Math.floor(Math.random()*t.length),c=t[e];t.splice(e,1),yield c,n--}}(c),o=[];for(const e of r)o.push(e);const a=n.filter((e=>{if(e.title===o[0]||e.title===o[1]||e.title===o[2])return e}));((e,t)=>{const n=t.map((e=>`\n        <div class="comic--card">\n        <img loading="lazy" src="${e?.images[0]?.path}.${e?.images[0]?.extension}" alt="${e.title}" class="comic--card__img" onerror="this.onerror=null;this.src='./img/error.png'"/>\n        <div class="comic--card__body">\n            <h3 class="comic--card__title">${e.title}</h3>\n            <p class="comic--card__desc">From the series of ${e.series.name}</p>\n            <btn class="comic--card__btn">\n              <a href="${e.urls[0].url}" class="comic--card__btn__link">Know More</a>\n            </btn>\n        </div>\n        </div>`)).join("");e.innerHTML=n;document.querySelector(".moreComic").innerText=`and ${c.length<97?`${c.length}`:"100+"} other comics more!`;document.querySelectorAll(".comic--card__title").forEach((e=>{e.innerText.length>35&&e.classList.add("small-font"),e.innerText.length>50&&(e.classList.remove("small-font"),e.classList.add("smaller-font")),e.innerText.length>70&&(e.classList.remove("smaller-font"),e.classList.add("smallest-font"))}))})(comicDiv,a)};invokeFuncInDataTemplate(target,getComicInfo,characterURL);const getEventInfo=async e=>{const t=`https://gateway.marvel.com/v1/public/characters/${e.id}/events?limit=100&ts=1&apikey=ffab3772fcbccb99f5afc9bd0b19c7ec&hash=c943498f362b6eb739af46796faf4036`,n=(await fetchStuff(t)).data.results,c=n.map((e=>e.title));const r=function*(e){const t=e;let n=3;for(;0!==n;){const e=Math.floor(Math.random()*t.length),c=t[e];t.splice(e,1),yield c,n--}}(c),o=[];for(const e of r)o.push(e);const a=n.filter((e=>{if(e.title===o[0]||e.title===o[1]||e.title===o[2])return e}));((e,t)=>{const n=t.map((e=>`\n        <div class="event--card">\n        <img loading="lazy" src="${e.thumbnail.path}.${e.thumbnail.extension}" alt="${e.title}" class="event--card__img" onerror="this.onerror=null;this.src='./img/error.png'"/>\n        <div class="event--card__body">\n            <h2 class="event--card__title">${e.title}</h2>\n            <p class="event--card__desc">${e.description}</p>\n            <btn class="event--card__btn">\n              <a href="${e.urls[0].url}" class="event--card__btn__link">Know More</a>\n            </btn>\n        </div>\n        </div>`)).join("");e.innerHTML=n;const r=document.querySelector(".moreEvent");0===c.length?r.style.opacity="0":r.innerText=`and ${c.length<c.length+o.length?`${c.length}`:"100+"} other events more!`})(eventDiv,a)};invokeFuncInDataTemplate(target,getEventInfo,characterURL);
const searchBox=document.querySelector(".searchbox"),matchList=document.querySelector(".match--list"),fetchSet=async e=>{const t=await fetch(e);return await t.json()},searchCharacter=async e=>{if(!e.length)return void(matchList.innerHTML="");let t=(await fetchSet(`https://gateway.marvel.com/v1/public/characters?nameStartsWith=${e}&limit=5&ts=1&apikey=ffab3772fcbccb99f5afc9bd0b19c7ec&hash=c943498f362b6eb739af46796faf4036`))?.data?.results;e.length?t.length?outputHTML(t):matchList.innerHTML="":t=[]},outputHTML=e=>{const t=e=>`${e.thumbnail.path}/landscape_small.${e.thumbnail.extension}`;if(e.length>0){const a=e.map((e=>e.name.length>15?`<li class="box" tabindex="0">\n                  <img src="${t(e)}" alt="${e.name}" class="box__img " onerror="this.onerror=null;this.src='./img/error.png'">\n          <div class="box__container">\n                  <h3 class="box__container__name" style="font-size:calc(0.45rem + 0.5vw);">${e.name}</h3></div>\n                  </li>`:e.name.length>25?`<li class="box" tabindex="0">\n                  <img src="${t(e)}" alt="${e.name}" class="box__img" onerror="this.onerror=null;this.src='./img/error.png'">\n          <div class="box__container">\n                  <h3 class="box__container__name tinier-font" style="font-size:calc(0.35rem + 0.5vw);">${e.name}</h3></div>\n                  </li>`:`<li class="box" tabindex="0">\n                  <img src="${t(e)}" alt="${e.name}" class="box__img" onerror="this.onerror=null;this.src='./img/error.png'">\n          <div class="box__container">\n                  <h3 class="box__container__name" >${e.name}</h3></div>\n                  </li>`)).join("");matchList.innerHTML=a}};searchBox.addEventListener("input",(()=>{searchCharacter(searchBox.value),setTimeout((()=>{if(matchList.hasChildNodes()){matchList.childNodes.forEach((e=>{e.addEventListener("click",(()=>{const t=e.children[1].children[0].innerText;localStorage.setItem("selectedCharacter",t),window.document.location="./marvelHero.html"})),e.addEventListener("focus",(()=>{e.addEventListener("keyup",(t=>{13===t.keyCode&&e.click()}))}))}))}}),1e3)})),document.addEventListener("click",(e=>{e.target!==searchBox&&searchCharacter("")})),matchList.addEventListener("click",(e=>{if(e.target.matches(".box__container")){const t=Array.from(e.target.children)[0].innerText;localStorage.setItem("selectedCharacter",t),window.document.location="./marvelHero.html"}else if(e.target.matches(".box__container__name")){const t=e.target.innerText;localStorage.setItem("selectedCharacter",t),window.document.location="./marvelHero.html"}else if(e.target.matches(".box__img")){const t=e.target.getAttribute("alt");localStorage.setItem("selectedCharacter",t),window.document.location="./marvelHero.html"}}));